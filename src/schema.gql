# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

"""Métricas consolidadas de negocio (Dashboard KPIs)"""
type BusinessKPIsType {
  """Métricas de reservaciones"""
  reservations: ReservationMetricsType!

  """Métricas de ingresos"""
  revenue: RevenueMetricsType!

  """Métricas de reseñas"""
  reviews: ReviewMetricsType!

  """Total de restaurantes"""
  totalRestaurants: Int!

  """Total de usuarios registrados"""
  totalUsers: Int!
}

"""Ingresos agrupados por día"""
type DailyRevenueType {
  """Fecha (YYYY-MM-DD)"""
  date: String!

  """Cantidad de pagos"""
  paymentCount: Int!

  """Ingresos del día"""
  revenue: Float!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""Informacion detallada de un plato del menu."""
type DishType {
  description: String
  id: ID!
  imageId: String
  imageUrl: String
  menuId: ID!
  name: String!
  price: Float!
  restaurantId: ID!
}

"""Filtro para historial de compras de un cliente."""
input FiltroHistorialInput {
  fechaDesde: DateTime
  fechaHasta: DateTime
  totalMax: Float
  totalMin: Float
}

"""Filtro avanzado para buscar productos."""
input FiltroProductoInput {
  """Categoria id."""
  categoriaId: ID

  """Busqueda por nombre (contiene)."""
  nombre: String

  """Precio maximo."""
  precioMax: Float

  """Precio minimo."""
  precioMin: Float

  """Stock minimo."""
  stockMin: Int
}

"""Informacion de un menu disponible en un restaurante."""
type MenuType {
  coverImageUrl: String
  description: String
  id: ID!
  name: String!
  price: Float
  restaurantId: ID!
}

"""Respuesta paginada para productos."""
type PaginatedProductsType {
  items: [ProductResultType!]!
  pages: Int!
  total: Int!
}

"""Parmetros de paginacion estandar."""
input PaginationInput {
  """Numero maximo de elementos a recuperar."""
  limit: Int

  """Numero de elementos a omitir."""
  offset: Int
}

"""Resumen de un pago asociado a una reservacion."""
type PaymentSummaryType {
  amount: Float!
  currency: String!
  id: ID!
  method: String!
  notes: String
  paidAt: DateTime!
  reference: String

  """Reservacion asociada, resuelta bajo demanda."""
  reservation: ReservationSummaryType
  reservationId: ID!
  status: String!
  userId: ID!
}

"""Perfil consolidado de un usuario."""
type PerfilUsuarioType {
  gastoTotal: Float!
  ultimasReservas: [ReservationSummaryType!]!
  ultimosPagos: [PaymentSummaryType!]!
  usuario: UserType!
}

"""Representa un producto encontrado."""
type ProductResultType {
  categoryId: String
  id: ID!
  name: String!
  price: Float!
  stock: Int!
}

"""Detalle completo de un plato con su contexto."""
type ProductoDetalladoType {
  menu: MenuType!
  plato: DishType!
  restaurante: RestaurantType!
  ultimasResenas: [ReviewType!]!
}

"""Compra/venta realizada por un cliente."""
type PurchaseType {
  clienteId: ID!
  fecha: DateTime!
  id: ID!
  total: Float!
}

type Query {
  """Buscar clientes por nombre o email y ordenarlos por campo dado."""
  buscarClientes(criterio: String!, orden: String): [UserType!]!

  """Busqueda avanzada de productos con paginacion y filtros."""
  buscarProductos(filtro: FiltroProductoInput, paginacion: PaginationInput): PaginatedProductsType!

  """
  Métricas consolidadas de negocio: ingresos, reservas, reseñas, usuarios y restaurantes
  """
  businessKPIs: BusinessKPIsType!

  """Ingresos agrupados por día (últimos N días con pagos)"""
  dailyRevenue: [DailyRevenueType!]!

  """Historial de compras de un cliente filtrado por fecha y total."""
  historialComprasCliente(clienteId: Int!, filtro: FiltroHistorialInput): [PurchaseType!]!

  """Retorna un perfil enriquecido del usuario con sus ultimas actividades."""
  perfilUsuario(
    """Identificador del usuario."""
    id: ID!
  ): PerfilUsuarioType!

  """
  Obtiene la informacion completa de un plato incluyendo contexto y reseñas.
  """
  productoDetallado(
    """Identificador del plato a consultar."""
    id: ID!
  ): ProductoDetalladoType!

  """Métricas detalladas de reservaciones"""
  reservationMetrics: ReservationMetricsType!

  """Metricas principales para un tablero ejecutivo."""
  resumenGeneral: ResumenGeneralType!

  """Métricas detalladas de ingresos"""
  revenueMetrics: RevenueMetricsType!

  """Métricas de calificaciones y reseñas"""
  reviewMetrics: ReviewMetricsType!

  """
  Restaurantes ordenados por ingresos totales (basado en reservationId de pagos)
  """
  topRestaurantsByRevenue: [TopRestaurantType!]!
}

"""Métricas de reservaciones"""
type ReservationMetricsType {
  """Tasa de cancelación (porcentaje)"""
  cancellationRate: Float!

  """Reservaciones canceladas"""
  cancelledReservations: Int!

  """Reservaciones completadas"""
  completedReservations: Int!

  """Reservaciones confirmadas"""
  confirmedReservations: Int!

  """Total de reservaciones"""
  totalReservations: Int!
}

"""Resumen de una reservacion realizada por un usuario."""
type ReservationSummaryType {
  guestCount: Int!
  id: ID!
  notes: String
  reservationDate: DateTime!
  reservationTime: String!

  """Restaurante asociado a la reservacion. Resuelto bajo demanda."""
  restaurant: RestaurantType
  restaurantId: ID!
  status: String!
  tableId: ID!
  userId: ID!
}

"""Informacion basica de un restaurante."""
type RestaurantType {
  address: String!
  capacity: Int!
  description: String
  id: ID!
  imageId: String
  imageUrl: String
  name: String!
  openingHours: String
}

"""Metricas generales para tableros ejecutivos."""
type ResumenGeneralType {
  totalClientes: Int!
  totalPlatos: Int!
  totalVentasHoy: Float!
}

"""Métricas de ingresos totales"""
type RevenueMetricsType {
  """Valor promedio de pago"""
  avgPaymentValue: Float!

  """Cantidad de pagos completados"""
  totalPayments: Int!

  """Ingresos totales de pagos completados"""
  totalRevenue: Float!
}

"""Métricas de reseñas y calificaciones"""
type ReviewMetricsType {
  """Calificación promedio"""
  avgRating: Float!

  """Cantidad de reseñas con calificación 5"""
  fiveStarCount: Int!

  """Cantidad de reseñas con calificación 1"""
  oneStarCount: Int!

  """Total de reseñas"""
  totalReviews: Int!
}

"""Resena realizada por un cliente."""
type ReviewType {
  comment: String
  createdAt: DateTime!
  id: ID!
  rating: Float!
  restaurantId: ID!
  userId: ID!
}

"""Top restaurante por ingresos"""
type TopRestaurantType {
  """Cantidad de pagos"""
  paymentCount: Int!

  """ID del restaurante"""
  restaurantId: String!

  """Ingresos totales"""
  totalRevenue: Float!
}

"""Representa un usuario dentro del dominio REST."""
type UserType {
  email: String!
  id: ID!
  names: String!
  phone: String!
}